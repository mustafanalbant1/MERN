"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["722"],{7389:function(e,t,r){r.d(t,{v:function(){return a}});var o=r(7126),n=r(3064),i=r(9885);let a=e=>{let{onBackLinkClick:t}=e;return(0,o.tZ)(i.ErrorCard,{cardTitle:(0,n.localizationKeys)("signIn.alternativeMethods.getHelp.title"),cardSubtitle:(0,n.localizationKeys)("signIn.alternativeMethods.getHelp.content"),onBackLinkClick:t})}},7649:function(e,t,r){r.r(t),r.d(t,{SignIn:()=>e_,SignInModal:()=>ew});var o=r("7126"),n=r("2631"),i=r("4194"),a=r("2073"),s=r("5112"),l=r("7571"),c=r("3064"),d=r("4676"),u=r("4150"),p=r("6031"),h=r("6789"),m=r("5609"),f=r("9515"),I=r("4152"),g=r("9885"),v=r("6391"),C=r("3234"),S=r("2539");let B=(0,g.withCardStateProvider)(()=>{let e=(0,l.useCoreSignIn)(),t=(0,g.useCardState)(),{navigate:r}=(0,d.useRouter)(),n=(0,C.H)(),{userSettings:{passwordSettings:a}}=(0,l.useEnvironment)(),{t:s,locale:u}=(0,c.useLocalizations)(),p="needs_new_password"===e.status&&"reset_password_email_code"!==e.firstFactorVerification.strategy&&"reset_password_phone_code"!==e.firstFactorVerification.strategy;i.useEffect(()=>{p&&t.setError(s((0,c.localizationKeys)("signIn.resetPassword.requiredMessage")))},[]);let h=(0,S.Yp)("password","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,S.GM)(e,{t:s,locale:u,passwordSettings:a})}),m=(0,S.Yp)("confirmPassword","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),f=(0,S.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,c.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:B,isPasswordMatch:y}=(0,v.p5)({passwordField:h,confirmPasswordField:m}),_=async()=>{h.clearFeedback(),m.clearFeedback();try{let{status:t,createdSessionId:o}=await e.resetPassword({password:h.value,signOutOfOtherSessions:f.checked});switch(t){case"complete":if(o){let e=new URLSearchParams;return e.set("createdSessionId",o),r("../reset-password-success?".concat(e.toString()))}return console.error((0,I.Ws)(t,n));case"needs_second_factor":return r("../factor-two");default:return console.error((0,I.Ws)(t,n))}}catch(e){return(0,S.S3)(e,[h,m],t.setError)}};return(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{children:[(0,o.tZ)(g.Header.Root,{showLogo:!0,children:(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.resetPassword.title")})}),(0,o.tZ)(g.Card.Alert,{children:t.error}),(0,o.tZ)(c.Col,{elementDescriptor:c.descriptors.main,gap:8,children:(0,o.BX)(g.Form.Root,{onSubmit:_,onBlur:()=>{h.value&&B(m.value)},gap:8,children:[(0,o.BX)(c.Col,{gap:6,children:[(0,o.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:e.identifier||"",style:{display:"none"}}),(0,o.tZ)(g.Form.ControlRow,{elementId:h.id,children:(0,o.tZ)(g.Form.PasswordInput,{...h.props,isRequired:!0,autoFocus:!0})}),(0,o.tZ)(g.Form.ControlRow,{elementId:m.id,children:(0,o.tZ)(g.Form.PasswordInput,{...m.props,onChange:e=>(e.target.value&&B(e.target.value),m.props.onChange(e))})}),!p&&(0,o.tZ)(g.Form.ControlRow,{elementId:f.id,children:(0,o.tZ)(g.Form.Checkbox,{...f.props})})]}),(0,o.BX)(c.Col,{gap:3,children:[(0,o.tZ)(g.Form.SubmitButton,{isDisabled:!y,localizationKey:(0,c.localizationKeys)("signIn.resetPassword.formButtonPrimary")}),(0,o.tZ)(g.Card.Action,{elementId:"alternativeMethods",children:(0,o.tZ)(g.Card.ActionLink,{elementDescriptor:c.descriptors.backLink,localizationKey:(0,c.localizationKeys)("backButton"),onClick:()=>r("../")})})]})]})})]}),(0,o.tZ)(g.Card.Footer,{})]})});var y=r("4875"),_=r("2882");let w=(0,g.withCardStateProvider)(()=>{let e=(0,g.useCardState)();return(0,y.E)(),(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{children:[(0,o.tZ)(g.Header.Root,{showLogo:!0,children:(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.resetPassword.title")})}),(0,o.tZ)(g.Card.Alert,{children:e.error}),(0,o.BX)(c.Col,{elementDescriptor:c.descriptors.main,gap:8,children:[(0,o.tZ)(c.Text,{localizationKey:(0,c.localizationKeys)("signIn.resetPassword.successMessage")}),(0,o.tZ)(_.kC,{direction:"row",center:!0,children:(0,o.tZ)(c.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:c.descriptors.spinner})})]})]}),(0,o.tZ)(g.Card.Footer,{})]})});var A=r("8969"),b=r("9037"),k=r("8655"),Z=r("9327"),P=r("5241");let F=(0,A.Hy)((0,g.withCardStateProvider)(()=>{let e=(0,b.v)(),{userProfileUrl:t}=(0,l.useEnvironment)().displayConfig,{afterSignInUrl:r,path:n}=(0,l.useSignInContext)(),{navigateAfterSignOut:i}=(0,l.useSignOutContext)(),{handleSignOutAllClicked:a,handleSessionClicked:s,activeSessions:d,handleAddAccountClicked:u}=(0,P.Z)({navigateAfterSignOut:i,afterSwitchSessionUrl:r,userProfileUrl:t,signInUrl:n,user:void 0});return(0,o.tZ)(c.Flow.Part,{part:"accountSwitcher",children:(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{sx:e=>({padding:"".concat(e.space.$8," ").concat(e.space.$none," ").concat(e.space.$none)}),children:[(0,o.BX)(g.Header.Root,{children:[(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.accountSwitcher.title")}),(0,o.tZ)(g.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.accountSwitcher.subtitle")})]}),(0,o.tZ)(g.Card.Alert,{children:e.error}),(0,o.tZ)(c.Col,{elementDescriptor:c.descriptors.main,gap:8,sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),children:(0,o.BX)(g.Actions,{role:"menu",children:[d.map(e=>(0,o.tZ)(g.PreviewButton,{onClick:s(e),sx:e=>({height:e.sizes.$16,justifyContent:"flex-start",borderRadius:0}),icon:k.nR,children:(0,o.tZ)(g.UserPreview,{user:e.user,sx:{width:"100%"}})},e.id)),(0,o.tZ)(g.Action,{elementDescriptor:c.descriptors.accountSwitcherActionButton,elementId:c.descriptors.accountSwitcherActionButton.setId("addAccount"),iconBoxElementDescriptor:c.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:c.descriptors.accountSwitcherActionButtonIconBox.setId("addAccount"),iconElementDescriptor:c.descriptors.accountSwitcherActionButtonIcon,iconElementId:c.descriptors.accountSwitcherActionButtonIcon.setId("addAccount"),icon:k.mm,label:(0,c.localizationKeys)("signIn.accountSwitcher.action__addAccount"),onClick:u,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})})]}),(0,o.tZ)(g.Card.Footer,{sx:e=>({">:first-of-type":{padding:"".concat(e.space.$1),width:"100%"}}),children:(0,o.tZ)(g.Card.Action,{sx:{width:"100%",">:first-of-type":{width:"100%",borderBottomWidth:0}},children:(0,o.tZ)(Z.gW,{handleSignOutAllClicked:a,elementDescriptor:c.descriptors.accountSwitcherActionButton,elementId:c.descriptors.accountSwitcherActionButton.setId("signOutAll"),iconBoxElementDescriptor:c.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:c.descriptors.accountSwitcherActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:c.descriptors.accountSwitcherActionButtonIcon,iconElementId:c.descriptors.accountSwitcherActionButtonIcon.setId("signOutAll"),label:(0,c.localizationKeys)("signIn.accountSwitcher.action__signOutAll"),actionSx:e=>({padding:"".concat(e.space.$2," ").concat(e.space.$2)})})})})]})})}));var E=r("1752"),U=r("1085"),z=r("6749"),L=r("5747"),T=r("138");let x=i.memo(e=>{let t=(0,n.cL)(),{navigate:r}=(0,d.useRouter)(),i=(0,b.v)(),{displayConfig:a}=(0,L.O)(),s=(0,l.useSignInContext)(),c=(0,l.useCoreSignIn)(),u=(0,z.wT)(s,a.signInUrl),p=s.afterSignInUrl||"/";return(0,o.tZ)(T.L,{...e,oauthCallback:e=>c.authenticateWithRedirect({strategy:e,redirectUrl:u,redirectUrlComplete:p}).catch(e=>(0,S.S3)(e,[],i.setError)),web3Callback:e=>t.authenticateWithWeb3({customNavigate:r,redirectUrl:p,signUpContinueUrl:s.signUpContinueUrl,strategy:e}).catch(e=>(0,S.Ht)(e,i.setError))})});var R=r("5518");function K(){var e;return null===(e=(0,l.useCoreSignIn)().supportedFirstFactors)||void 0===e?void 0:e.find(e=>{let{strategy:t}=e;return(0,R.Vh)(t)})}var M=r("7389");let O=(e,t)=>{let[r,n]=i.useState(!1),a=i.useCallback(()=>n(e=>!e),[n]);return r?(0,o.tZ)(M.v,{onBackLinkClick:a}):(0,o.tZ)(e,{...t,onHavingTroubleClick:a})},D=e=>O(H,{...e}),H=e=>{let{onBackLinkClick:t,onHavingTroubleClick:r,onFactorSelected:n,mode:i="default"}=e,a=(0,b.v)(),s=K(),{supportedFirstFactors:d}=(0,l.useCoreSignIn)(),{firstPartyFactors:u,hasAnyStrategy:p}=(0,E.l)({filterOutFactor:null==e?void 0:e.currentFactor,supportedFirstFactors:d}),h=function(e){switch(e){case"forgot":return"forgotPasswordMethods";case"pwned":return"passwordPwnedMethods";default:return"alternativeMethods"}}(i),m=function(e){switch(e){case"forgot":return(0,c.localizationKeys)("signIn.forgotPasswordAlternativeMethods.title");case"pwned":return(0,c.localizationKeys)("signIn.passwordPwned.title");default:return(0,c.localizationKeys)("signIn.alternativeMethods.title")}}(i),f=function(e){switch(e){case"forgot":case"pwned":return!0;default:return!1}}(i);return(0,o.tZ)(c.Flow.Part,{part:h,children:(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{children:[(0,o.BX)(g.Header.Root,{showLogo:!0,children:[(0,o.tZ)(g.Header.Title,{localizationKey:m}),!f&&(0,o.tZ)(g.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,o.tZ)(g.Card.Alert,{children:a.error}),(0,o.BX)(c.Flex,{direction:"col",elementDescriptor:c.descriptors.main,gap:6,children:[f&&s&&(0,o.tZ)(c.Button,{localizationKey:X(s),elementDescriptor:c.descriptors.alternativeMethodsBlockButton,isDisabled:a.isLoading,onClick:()=>{a.setError(void 0),n(s)}}),f&&p&&(0,o.tZ)(g.Divider,{dividerText:(0,c.localizationKeys)("signIn.forgotPasswordAlternativeMethods.label__alternativeMethods")}),(0,o.BX)(c.Col,{gap:4,children:[p&&(0,o.BX)(c.Flex,{elementDescriptor:c.descriptors.alternativeMethods,direction:"col",gap:2,children:[(0,o.tZ)(x,{enableWeb3Providers:!0,enableOAuthProviders:!0}),u&&u.map((e,t)=>{var r;return(0,o.tZ)(g.ArrowBlockButton,{leftIcon:(r=e,({email_link:k.xP,email_code:k.GT,phone_code:k.iU,reset_password_email_code:k.ds,reset_password_phone_code:k.ds,password:k.kh,passkey:k.IG})[r.strategy]),textLocalizationKey:X(e),elementDescriptor:c.descriptors.alternativeMethodsBlockButton,textElementDescriptor:c.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:c.descriptors.alternativeMethodsBlockButtonArrow,textVariant:"buttonLarge",isDisabled:a.isLoading,onClick:()=>{a.setError(void 0),n(e)}},t)})]}),t&&(0,o.tZ)(g.BackLink,{boxElementDescriptor:c.descriptors.backRow,linkElementDescriptor:c.descriptors.backLink,onClick:t})]})]})]}),(0,o.tZ)(g.Card.Footer,{children:(0,o.BX)(g.Card.Action,{elementId:"havingTrouble",children:[(0,o.tZ)(g.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:r})]})})]})})};function X(e){switch(e.strategy){case"email_link":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__emailLink",{identifier:(0,S.HT)(e.safeIdentifier)||""});case"email_code":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__emailCode",{identifier:(0,S.HT)(e.safeIdentifier)||""});case"phone_code":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,S.HT)(e.safeIdentifier)||""});case"password":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__password");case"passkey":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__passkey");case"reset_password_email_code":case"reset_password_phone_code":return(0,c.localizationKeys)("signIn.forgotPasswordAlternativeMethods.blockButton__resetPassword");default:throw'Invalid sign in strategy: "'.concat(e.strategy,'"')}}var $=r("2434");let N=e=>{let t=(0,l.useCoreSignIn)(),r=(0,g.useCardState)(),{navigate:a}=(0,d.useRouter)(),{afterSignInUrl:s}=(0,l.useSignInContext)(),{setActive:c}=(0,n.cL)(),u=(0,C.H)(),p=(0,n.cL)();i.useEffect(()=>{e.factorAlreadyPrepared||h()},[]);let h=()=>{t.prepareFirstFactor(e.factor).then(()=>e.onFactorPrepare()).catch(e=>(0,S.S3)(e,[],r.setError))};return(0,o.tZ)(g.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,inputLabel:e.inputLabel,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,o,n)=>{t.attemptFirstFactor({strategy:e.factor.strategy,code:r}).then(async e=>{switch(await o(),e.status){case"complete":return c({session:e.createdSessionId,redirectUrl:s});case"needs_second_factor":return a("../factor-two");case"needs_new_password":return a("../reset-password");default:return console.error((0,I.Ws)(e.status,u))}}).catch(e=>(0,$.ay)(e)?p.__internal_navigateWithError("..",e.errors[0]):n(e))},onResendCodeClicked:h,safeIdentifier:e.factor.safeIdentifier,profileImageUrl:t.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,showAlternativeMethods:e.showAlternativeMethods,onIdentityPreviewEditClicked:()=>a("../"),onBackLinkClicked:e.onBackLinkClicked})},W=e=>(0,o.tZ)(c.Flow.Part,{part:"emailCode",children:(0,o.tZ)(N,{...e,cardTitle:(0,c.localizationKeys)("signIn.emailCode.title"),cardSubtitle:(0,c.localizationKeys)("signIn.emailCode.subtitle"),inputLabel:(0,c.localizationKeys)("signIn.emailCode.formTitle"),resendButton:(0,c.localizationKeys)("signIn.emailCode.resendButton")})});var V=r("4814"),G=r("3241");let Y=e=>{let{t}=(0,c.useLocalizations)(),r=(0,b.v)(),a=(0,l.useCoreSignIn)(),s=(0,l.useSignInContext)(),{signInUrl:d}=s,{navigate:u}=(0,G.t)(),{afterSignInUrl:p}=(0,l.useSignInContext)(),{setActive:h}=(0,n.cL)(),{startEmailLinkFlow:m,cancelEmailLinkFlow:f}=(0,V.E)(a),[I,v]=i.useState(!1),C=(0,n.cL)();i.useEffect(()=>{B()},[]);let B=()=>{m({emailAddressId:e.factor.emailAddressId,redirectUrl:(0,z.dJ)(s,d)}).then(e=>y(e)).catch(e=>{if((0,$.ay)(e))return C.__internal_navigateWithError("..",e.errors[0]);(0,S.S3)(e,[],r.setError)})},y=async e=>{let o=e.firstFactorVerification;"expired"===o.status?r.setError(t((0,c.localizationKeys)("formFieldError__verificationLinkExpired"))):o.verifiedFromTheSameClient()?v(!0):await _(e)},_=async e=>"complete"===e.status?h({session:e.createdSessionId,redirectUrl:p}):"needs_second_factor"===e.status?u("../factor-two"):void 0;return I?(0,o.tZ)(A.Ej,{title:(0,c.localizationKeys)("signIn.emailLink.verifiedSwitchTab.titleNewTab"),subtitle:(0,c.localizationKeys)("signIn.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,o.tZ)(c.Flow.Part,{part:"emailLink",children:(0,o.tZ)(g.VerificationLinkCard,{cardTitle:(0,c.localizationKeys)("signIn.emailLink.title"),cardSubtitle:(0,c.localizationKeys)("signIn.emailLink.subtitle"),formTitle:(0,c.localizationKeys)("signIn.emailLink.formTitle"),formSubtitle:(0,c.localizationKeys)("signIn.emailLink.formSubtitle"),resendButton:(0,c.localizationKeys)("signIn.emailLink.resendButton"),onResendCodeClicked:()=>{f(),B()},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:a.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked})})},j=e=>(0,o.tZ)(c.Flow.Part,{part:"resetPassword",children:(0,o.tZ)(N,{...e,showAlternativeMethods:!1,cardTitle:(0,c.localizationKeys)("signIn.forgotPassword.title"),inputLabel:(0,c.localizationKeys)("signIn.forgotPassword.formTitle"),resendButton:(0,c.localizationKeys)("signIn.forgotPassword.resendButton")})});var q=r("3367");function J(e){let t=(0,g.useCardState)(),{setActive:r,__internal_navigateWithError:o}=(0,n.cL)(),a=(0,C.H)(),{afterSignInUrl:s}=(0,l.useSignInContext)(),{authenticateWithPasskey:c}=(0,l.useCoreSignIn)();return(0,i.useEffect)(()=>()=>{q.YI.abort()},[]),(0,i.useCallback)(async function(){for(var n=arguments.length,i=Array(n),l=0;l<n;l++)i[l]=arguments[l];try{let t=await c(...i);switch(t.status){case"complete":return r({session:t.createdSessionId,redirectUrl:s});case"needs_second_factor":return e();default:return console.error((0,I.Ws)(t.status,a))}}catch(r){let{flow:e}=i[0]||{};if((0,$.uX)(r)&&("passkey_operation_aborted"===r.code||"autofill"===e&&"passkey_retrieval_cancelled"===r.code))return;if((0,$.ay)(r))return o("..",r.errors[0]);(0,S.S3)(r,[],t.setError)}},[])}let Q=e=>{let{onShowAlternativeMethodsClick:t}=e,r=(0,g.useCardState)(),n=(0,l.useCoreSignIn)(),{navigate:a}=(0,G.t)(),[s,d]=i.useState(!1),u=i.useCallback(()=>d(e=>!e),[d]),p=J(()=>a("../factor-two"));return s?(0,o.tZ)(M.v,{onBackLinkClick:u}):(0,o.tZ)(c.Flow.Part,{part:"password",children:(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{children:[(0,o.BX)(g.Header.Root,{showLogo:!0,children:[(0,o.tZ)(c.Icon,{elementDescriptor:c.descriptors.passkeyIcon,icon:k.IG,sx:e=>({color:e.colors.$neutralAlpha500,marginInline:"auto",paddingBottom:e.sizes.$1,width:e.sizes.$12,height:e.sizes.$12})}),(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.passkey.title")}),(0,o.tZ)(g.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.passkey.subtitle")}),(0,o.tZ)(g.IdentityPreview,{identifier:n.identifier,avatarUrl:n.userData.imageUrl,onClick:()=>a("../")})]}),(0,o.tZ)(g.Card.Alert,{children:r.error}),(0,o.BX)(c.Flex,{direction:"col",elementDescriptor:c.descriptors.main,gap:4,children:[(0,o.tZ)(g.Form.Root,{onSubmit:e=>(e.preventDefault(),p()),gap:8,children:(0,o.tZ)(g.Form.SubmitButton,{hasArrow:!0})}),(0,o.tZ)(g.Card.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)(t?"footerActionLink__useAnotherMethod":"signIn.alternativeMethods.actionLink"),onClick:t||u})})]})]}),(0,o.tZ)(g.Card.Footer,{})]})})},ee=e=>{let{onForgotPasswordMethodClick:t,onShowAlternativeMethodsClick:r}=e,o=K(),n=(0,S.Yp)("password","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__password"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__password")});return{...n,props:{...n.props,actionLabel:o||r?(0,c.localizationKeys)("formFieldAction__forgotPassword"):"",onActionClicked:t||r||(()=>null)}}},et=e=>{let{onShowAlternativeMethodsClick:t,onPasswordPwned:r}=e,a=i.useRef(null),s=(0,g.useCardState)(),{setActive:d}=(0,n.cL)(),u=(0,l.useCoreSignIn)(),{afterSignInUrl:p}=(0,l.useSignInContext)(),h=(0,C.H)(),m=ee(e),{navigate:f}=(0,G.t)(),[v,B]=i.useState(!1),y=i.useCallback(()=>B(e=>!e),[B]),_=(0,n.cL)(),w=async e=>(e.preventDefault(),u.attemptFirstFactor({strategy:"password",password:m.value}).then(e=>{switch(e.status){case"complete":return d({session:e.createdSessionId,redirectUrl:p});case"needs_second_factor":return f("../factor-two");default:return console.error((0,I.Ws)(e.status,h))}}).catch(e=>{if((0,$.ay)(e))return _.__internal_navigateWithError("..",e.errors[0]);if((0,$.UZ)(e)&&r){s.setError({...e.errors[0],code:"form_password_pwned__sign_in"}),r();return}(0,S.S3)(e,[m],s.setError),setTimeout(()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.focus()},0)}));return v?(0,o.tZ)(M.v,{onBackLinkClick:y}):(0,o.tZ)(c.Flow.Part,{part:"password",children:(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{children:[(0,o.BX)(g.Header.Root,{showLogo:!0,children:[(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.password.title")}),(0,o.tZ)(g.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.password.subtitle")}),(0,o.tZ)(g.IdentityPreview,{identifier:u.identifier,avatarUrl:u.userData.imageUrl,onClick:()=>f("../")})]}),(0,o.tZ)(g.Card.Alert,{children:s.error}),(0,o.BX)(c.Flex,{direction:"col",elementDescriptor:c.descriptors.main,gap:4,children:[(0,o.BX)(g.Form.Root,{onSubmit:w,gap:8,children:[(0,o.tZ)("input",{readOnly:!0,id:"identifier-field",name:"identifier",value:u.identifier||"",style:{display:"none"}}),(0,o.tZ)(g.Form.ControlRow,{elementId:m.id,children:(0,o.tZ)(g.Form.PasswordInput,{...m.props,ref:a,autoFocus:!0})}),(0,o.tZ)(g.Form.SubmitButton,{hasArrow:!0})]}),(0,o.tZ)(g.Card.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)(t?"signIn.password.actionLink":"signIn.alternativeMethods.actionLink"),onClick:t||y})})]})]}),(0,o.tZ)(g.Card.Footer,{})]})})},er=e=>{let{applicationName:t}=(0,l.useEnvironment)().displayConfig;return(0,o.tZ)(c.Flow.Part,{part:"phoneCode",children:(0,o.tZ)(N,{...e,cardTitle:(0,c.localizationKeys)("signIn.phoneCode.title"),cardSubtitle:(0,c.localizationKeys)("signIn.phoneCode.subtitle",{applicationName:t}),inputLabel:(0,c.localizationKeys)("signIn.phoneCode.formTitle"),resendButton:(0,c.localizationKeys)("signIn.phoneCode.resendButton")})})},eo=e=>{if(!e)return"";let t=e.strategy;return"emailAddressId"in e&&(t+=e.emailAddressId),"phoneNumberId"in e&&(t+=e.phoneNumberId),t},en=(0,A.Hy)((0,g.withCardStateProvider)(function(){let e=(0,l.useCoreSignIn)(),{preferredSignInStrategy:t}=(0,l.useEnvironment)().displayConfig,r=e.supportedFirstFactors,n=(0,d.useRouter)(),a=(0,g.useCardState)(),{supportedFirstFactors:s}=(0,l.useCoreSignIn)(),c=i.useRef(""),[{currentFactor:u},p]=i.useState(()=>({currentFactor:(0,R.t3)(r,e.identifier,t),prevCurrentFactor:void 0})),{hasAnyStrategy:h}=(0,E.l)({filterOutFactor:u,supportedFirstFactors:s}),[m,f]=i.useState(()=>!u||!(0,R.xT)(u)),I=K(),[v,C]=i.useState(!1),[S,B]=i.useState(!1);if(i.useEffect(()=>{("needs_identifier"===e.status||null===e.status)&&n.navigate("../")},[]),!u&&e.status)return(0,o.tZ)(g.ErrorCard,{cardTitle:(0,U.u1)("signIn.noAvailableMethods.title"),cardSubtitle:(0,U.u1)("signIn.noAvailableMethods.subtitle"),message:(0,U.u1)("signIn.noAvailableMethods.message")});let y=h?()=>f(e=>!e):void 0,_=()=>C(e=>!e),w=()=>{c.current=eo(u)},A=e=>{p(t=>({currentFactor:e,prevCurrentFactor:t.currentFactor}))};if(m||v){let e=(0,R.xT)(u),t=m?y:_;return(0,o.tZ)(D,{mode:v?S?"pwned":"forgot":"default",onBackLinkClick:e?()=>{a.setError(void 0),B(!1),null==t||t()}:void 0,onFactorSelected:e=>{A(e),null==t||t()},currentFactor:u})}if(!u)return(0,o.tZ)(g.LoadingCard,{});switch(null==u?void 0:u.strategy){case"passkey":return(0,o.tZ)(Q,{onFactorPrepare:w,onShowAlternativeMethodsClick:y});case"password":return(0,o.tZ)(et,{onForgotPasswordMethodClick:I?_:y,onShowAlternativeMethodsClick:y,onPasswordPwned:()=>{B(!0),_()}});case"email_code":return(0,o.tZ)(W,{factorAlreadyPrepared:c.current===eo(u),onFactorPrepare:w,factor:u,onShowAlternativeMethodsClicked:y});case"phone_code":return(0,o.tZ)(er,{factorAlreadyPrepared:c.current===eo(u),onFactorPrepare:w,factor:u,onShowAlternativeMethodsClicked:y});case"email_link":return(0,o.tZ)(Y,{factorAlreadyPrepared:c.current===eo(u),onFactorPrepare:w,factor:u,onShowAlternativeMethodsClicked:y});case"reset_password_phone_code":return(0,o.tZ)(j,{factorAlreadyPrepared:c.current===eo(u),onFactorPrepare:w,factor:u,onShowAlternativeMethodsClicked:y,onBackLinkClicked:()=>{p(e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor})),_()},cardSubtitle:(0,U.u1)("signIn.forgotPassword.subtitle_phone")});case"reset_password_email_code":return(0,o.tZ)(j,{factorAlreadyPrepared:c.current===eo(u),onFactorPrepare:w,factor:u,onShowAlternativeMethodsClicked:y,onBackLinkClicked:()=>{p(e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor})),_()},cardSubtitle:(0,U.u1)("signIn.forgotPassword.subtitle_email")});default:return(0,o.tZ)(g.LoadingCard,{})}})),ei=e=>{let[t,r]=i.useState(!1),n=i.useCallback(()=>r(e=>!e),[r]);return t?(0,o.tZ)(M.v,{onBackLinkClick:n}):(0,o.tZ)(ea,{onBackLinkClick:e.onBackLinkClick,onFactorSelected:e.onFactorSelected,onHavingTroubleClick:n})},ea=e=>{let{onHavingTroubleClick:t,onFactorSelected:r,onBackLinkClick:n}=e,i=(0,b.v)(),{supportedSecondFactors:a}=(0,l.useCoreSignIn)();return(0,o.tZ)(c.Flow.Part,{part:"alternativeMethods",children:(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{children:[(0,o.BX)(g.Header.Root,{showLogo:!0,children:[(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.title")}),(0,o.tZ)(g.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,o.tZ)(g.Card.Alert,{children:i.error}),(0,o.BX)(c.Col,{elementDescriptor:c.descriptors.main,gap:3,children:[(0,o.tZ)(c.Col,{gap:2,children:a&&a.sort(S.Q0).map((e,t)=>(0,o.tZ)(g.ArrowBlockButton,{textLocalizationKey:function(e){switch(e.strategy){case"phone_code":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,S.HT)(e.safeIdentifier)||""});case"totp":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__totp");case"backup_code":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__backupCode");default:throw'Invalid sign in strategy: "'.concat(e.strategy,'"')}}(e),elementDescriptor:c.descriptors.alternativeMethodsBlockButton,textElementDescriptor:c.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:c.descriptors.alternativeMethodsBlockButtonArrow,isDisabled:i.isLoading,onClick:()=>r(e)},t))}),(0,o.tZ)(g.Card.Action,{elementId:"alternativeMethods",children:n&&(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("backButton"),onClick:e.onBackLinkClick})})]})]}),(0,o.tZ)(g.Card.Footer,{children:(0,o.BX)(g.Card.Action,{elementId:"havingTrouble",children:[(0,o.tZ)(g.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:t})]})})]})})},es=e=>{let{onShowAlternativeMethodsClicked:t}=e,r=(0,l.useCoreSignIn)(),{afterSignInUrl:i}=(0,l.useSignInContext)(),{setActive:a}=(0,n.cL)(),{navigate:s}=(0,d.useRouter)(),u=(0,C.H)(),p=(0,g.useCardState)(),h=(0,S.Yp)("code","",{type:"text",label:(0,c.localizationKeys)("formFieldLabel__backupCode"),isRequired:!0}),m=(0,n.cL)(),f=e=>{var t,r;return(0,R.Vh)(null===(t=e.firstFactorVerification)||void 0===t?void 0:t.strategy)&&(null===(r=e.firstFactorVerification)||void 0===r?void 0:r.status)==="verified"};return(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{children:[(0,o.BX)(g.Header.Root,{showLogo:!0,children:[(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.backupCodeMfa.title")}),(0,o.tZ)(g.Header.Subtitle,{localizationKey:f(r)?(0,c.localizationKeys)("signIn.forgotPassword.subtitle"):(0,c.localizationKeys)("signIn.backupCodeMfa.subtitle")})]}),(0,o.tZ)(g.Card.Alert,{children:p.error}),(0,o.tZ)(c.Col,{elementDescriptor:c.descriptors.main,gap:8,children:(0,o.BX)(g.Form.Root,{onSubmit:e=>(e.preventDefault(),r.attemptSecondFactor({strategy:"backup_code",code:h.value}).then(e=>{if("complete"===e.status){if(f(e)&&e.createdSessionId){let t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),s("../reset-password-success?".concat(t.toString()))}return a({session:e.createdSessionId,redirectUrl:i})}return console.error((0,I.Ws)(e.status,u))}).catch(e=>{if((0,$.ay)(e))return m.__internal_navigateWithError("..",e.errors[0]);(0,S.S3)(e,[h],p.setError)})),children:[(0,o.tZ)(g.Form.ControlRow,{elementId:h.id,children:(0,o.tZ)(g.Form.PlainInput,{...h.props,autoFocus:!0,onActionClicked:t})}),(0,o.BX)(c.Col,{gap:3,children:[(0,o.tZ)(g.Form.SubmitButton,{hasArrow:!0}),(0,o.tZ)(g.Card.Action,{elementId:"alternativeMethods",children:t&&(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("footerActionLink__useAnotherMethod"),onClick:t})})]})]})})]}),(0,o.tZ)(g.Card.Footer,{})]})},el=e=>{let t=(0,l.useCoreSignIn)(),r=(0,g.useCardState)(),{afterSignInUrl:a}=(0,l.useSignInContext)(),{setActive:s}=(0,n.cL)(),{navigate:u}=(0,d.useRouter)(),p=(0,C.H)(),h=(0,n.cL)();i.useEffect(()=>{!e.factorAlreadyPrepared&&(null==m||m())},[]);let m=e.prepare?()=>{var t;return null===(t=e.prepare)||void 0===t?void 0:t.call(e).then(()=>e.onFactorPrepare()).catch(e=>{if((0,$.ay)(e))return h.__internal_navigateWithError("..",e.errors[0]);(0,S.S3)(e,[],r.setError)})}:void 0,f=e=>{var t,r;return(0,R.Vh)(null===(t=e.firstFactorVerification)||void 0===t?void 0:t.strategy)&&(null===(r=e.firstFactorVerification)||void 0===r?void 0:r.status)==="verified"};return(0,o.tZ)(g.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:f(t)?(0,c.localizationKeys)("signIn.forgotPassword.subtitle"):e.cardSubtitle,resendButton:e.resendButton,inputLabel:e.inputLabel,onCodeEntryFinishedAction:(r,o,n)=>{t.attemptSecondFactor({strategy:e.factor.strategy,code:r}).then(async e=>{if(await o(),"complete"===e.status){if(f(e)&&e.createdSessionId){let t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),u("../reset-password-success?".concat(t.toString()))}return s({session:e.createdSessionId,redirectUrl:a})}return console.error((0,I.Ws)(e.status,p))}).catch(e=>(0,$.ay)(e)?h.__internal_navigateWithError("..",e.errors[0]):n(e))},onResendCodeClicked:m,safeIdentifier:"safeIdentifier"in e.factor?e.factor.safeIdentifier:void 0,profileImageUrl:t.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,children:f(t)&&(0,o.tZ)(c.Text,{localizationKey:(0,c.localizationKeys)("signIn.resetPasswordMfa.detailsLabel"),colorScheme:"secondary"})})},ec=e=>{let t=(0,l.useCoreSignIn)();return(0,o.tZ)(c.Flow.Part,{part:"phoneCode2Fa",children:(0,o.tZ)(el,{...e,cardTitle:(0,c.localizationKeys)("signIn.phoneCodeMfa.title"),cardSubtitle:(0,c.localizationKeys)("signIn.phoneCodeMfa.subtitle"),inputLabel:(0,c.localizationKeys)("signIn.phoneCodeMfa.formTitle"),resendButton:(0,c.localizationKeys)("signIn.phoneCodeMfa.resendButton"),prepare:()=>{let{phoneNumberId:r,strategy:o}=e.factor;return t.prepareSecondFactor({phoneNumberId:r,strategy:o})}})})},ed=e=>(0,o.tZ)(c.Flow.Part,{part:"totp2Fa",children:(0,o.tZ)(el,{...e,cardTitle:(0,c.localizationKeys)("signIn.totpMfa.title"),cardSubtitle:(0,c.localizationKeys)("signIn.totpMfa.subtitle"),inputLabel:(0,c.localizationKeys)("signIn.totpMfa.formTitle")})}),eu=e=>{if(!e)return"";let t=e.strategy;return"phoneNumberId"in e&&(t+=e.phoneNumberId),t},ep=(0,A.Hy)((0,g.withCardStateProvider)(function(){let e=(0,l.useCoreSignIn)().supportedSecondFactors,t=i.useRef(""),[r,n]=i.useState(()=>(0,R.bx)(e)),[a,s]=i.useState(!r),c=()=>s(e=>!e),d=()=>{t.current=eu(r)};if(!r)return(0,o.tZ)(g.LoadingCard,{});if(a)return(0,o.tZ)(ei,{onBackLinkClick:c,onFactorSelected:e=>{n(e),c()}});switch(null==r?void 0:r.strategy){case"phone_code":return(0,o.tZ)(ec,{factorAlreadyPrepared:t.current===eu(r),onFactorPrepare:d,factor:r,onShowAlternativeMethodsClicked:c});case"totp":return(0,o.tZ)(ed,{factorAlreadyPrepared:t.current===eu(r),onFactorPrepare:d,factor:r,onShowAlternativeMethodsClicked:c});case"backup_code":return(0,o.tZ)(es,{onShowAlternativeMethodsClicked:c});default:return(0,o.tZ)(g.LoadingCard,{})}})),eh=(0,A.Hy)(A.L);var em=r("5263"),ef=r("753"),eI=r("3314"),eg=r("5756");let ev=()=>{let[e,t]=(0,i.useState)(!1),{navigate:r}=(0,d.useRouter)(),o=J(()=>r("factor-two")),{userSettings:n}=(0,l.useEnvironment)(),{passkeySettings:a,attributes:s}=n;return(0,i.useEffect)(()=>{async function e(){let e=await (0,em.h_)();t(e),e&&await o({flow:"autofill"})}a.allow_autofill&&s.passkey.enabled&&e()},[]),{isWebAuthnAutofillSupported:e}},eC=e=>{let{field:t}=e,[r,n]=(0,i.useState)(!1),a=(0,i.useRef)(null),s=!!(r||(null==t?void 0:t.value));return((0,i.useLayoutEffect)(()=>{let e=setInterval(()=>{if(null==a?void 0:a.current){var t;let r="onAutoFillStart"===window.getComputedStyle(a.current,":autofill").animationName||!!(null===(t=a.current)||void 0===t?void 0:t.matches("*:-webkit-autofill"));r&&(n(r),clearInterval(e))}},500);return()=>{clearInterval(e)}},[]),(0,i.useEffect)(()=>{(null==t?void 0:t.value)&&""!==t.value&&n(!1)},[null==t?void 0:t.value]),t)?(0,o.tZ)(g.Form.ControlRow,{elementId:t.id,sx:s?void 0:{position:"absolute",opacity:0,height:0,pointerEvents:"none",marginTop:"-1rem"},children:(0,o.tZ)(g.Form.PasswordInput,{...t.props,ref:a,tabIndex:s?void 0:-1})}):null},eS=(0,A.Hy)((0,g.withCardStateProvider)(function(){var e,t;let r=(0,g.useCardState)(),a=(0,n.cL)(),s=(0,v._m)(),{displayConfig:u,userSettings:p}=(0,l.useEnvironment)(),h=(0,l.useCoreSignIn)(),{navigate:m}=(0,d.useRouter)(),f=(0,l.useOptions)(),B=(0,l.useSignInContext)(),{afterSignInUrl:y,signUpUrl:_,waitlistUrl:w}=B,b=!!(null==f?void 0:null===(e=f.experimental)||void 0===e?void 0:e.combinedFlow),k=(0,C.H)(),Z=(0,i.useMemo)(()=>(0,A.vX)(p.enabledFirstFactorIdentifiers),[p.enabledFirstFactorIdentifiers]),{isWebAuthnAutofillSupported:P}=ev(),F=J(()=>m("factor-two")),E=(0,em.iW)(),U=!!(null===(t=B.initialValues)||void 0===t?void 0:t.phoneNumber)&&!(B.initialValues.emailAddress||B.initialValues.username)&&Z.includes("phone_number"),[L,T]=(0,i.useState)(U?"phone_number":Z[0]||""),[K,M]=(0,i.useState)(!1),O=(0,eI.XV)("__clerk_ticket")||"",D=p.enabledFirstFactorIdentifiers,H=p.web3FirstFactors,X=p.authenticatableSocialStrategies,$=p.instanceIsPasswordBased,{currentIdentifier:N,nextIdentifier:W}=(0,A.vO)(Z,L),V=(0,S.Yp)("password","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__password"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__password")}),G=B.initialValues||{},Y=(0,i.useMemo)(()=>({email_address:G.emailAddress,email_address_username:G.emailAddress||G.username,username:G.username,phone_number:G.phoneNumber}),[B.initialValues]),j=!!X.length||!!H.length,[q,Q]=(0,i.useState)(!(0,S.s2)()&&!j),ee=(0,S.Yp)("identifier",Y[L]||"",{...N,isRequired:!0,transformer:e=>e.trim()}),et=(0,S.Yp)("identifier",Y.phone_number||"",{...N,isRequired:!0}),er="phone_number"===L?et:ee,eo=e=>{ee.setValue(Y[L]||""),et.setValue(e),T("phone_number"),Q(!0)};(0,i.useLayoutEffect)(()=>{er.value.startsWith("+")&&Z.includes("phone_number")&&"phone_number"!==L&&!K&&(eo(er.value),M(!0))},[er.value,Z]),(0,i.useEffect)(()=>{O&&(s.setLoading(),r.setLoading(),h.create({strategy:"ticket",ticket:O}).then(e=>{switch(e.status){case"needs_first_factor":return m("factor-one");case"needs_second_factor":return m("factor-two");case"complete":return(0,eI.xy)("__clerk_ticket"),a.setActive({session:e.createdSessionId,redirectUrl:y});default:console.error((0,I.Ws)(e.status,k));return}}).catch(e=>el(e)).finally(()=>{s.setIdle(),r.setIdle()}))},[]),(0,i.useEffect)(()=>{(async function(){var e;let t=null==h?void 0:null===(e=h.firstFactorVerification)||void 0===e?void 0:e.error;if(t){switch(t.code){case ef.O1.NOT_ALLOWED_TO_SIGN_UP:case ef.O1.OAUTH_ACCESS_DENIED:case ef.O1.NOT_ALLOWED_ACCESS:case ef.O1.SAML_USER_ATTRIBUTE_MISSING:case ef.O1.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case ef.O1.USER_LOCKED:case ef.O1.EXTERNAL_ACCOUNT_NOT_FOUND:case ef.O1.SIGN_UP_MODE_RESTRICTED:case ef.O1.SIGN_UP_MODE_RESTRICTED_WAITLIST:case ef.O1.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:case ef.O1.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:case ef.O1.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:case ef.O1.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:case ef.O1.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:r.setError(t);break;default:r.setError("Unable to complete action at this time. If the problem persists please contact support.")}await h.create({})}})()},[]);let en=e=>{let t=e.some(e=>"password"===e.name&&!!e.value);return(!t||p.enterpriseSSO.enabled)&&(e=e.filter(e=>"password"!==e.name)),{...(0,S.ni)(e),...t&&!p.enterpriseSSO.enabled&&{strategy:"password"}}},ei=(e,t)=>e.then(e=>{var r,o;if(!p.enterpriseSSO.enabled)return e;let n=null===(r=t.find(e=>"password"===e.name))||void 0===r?void 0:r.value;return!n||(null===(o=e.supportedFirstFactors)||void 0===o?void 0:o.some(e=>"saml"===e.strategy||"enterprise_sso"===e.strategy))?e:e.attemptFirstFactor({strategy:"password",password:n})}),ea=async function(){for(var e,t,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];try{let r=await ei(h.create(en(o)),o);switch(r.status){case"needs_identifier":(null===(e=r.supportedFirstFactors)||void 0===e?void 0:e.some(e=>"saml"===e.strategy||"enterprise_sso"===e.strategy))&&await es();break;case"needs_first_factor":if(null===(t=r.supportedFirstFactors)||void 0===t?void 0:t.every(e=>"enterprise_sso"===e.strategy)){await es();break}return m("factor-one");case"needs_second_factor":return m("factor-two");case"complete":return a.setActive({session:r.createdSessionId,redirectUrl:y});default:console.error((0,I.Ws)(r.status,k));return}}catch(e){return el(e)}},es=async()=>{let e=(0,z.wT)(B,u.signInUrl),t=B.afterSignInUrl||"/";return h.authenticateWithRedirect({strategy:"enterprise_sso",redirectUrl:e,redirectUrlComplete:t})},el=async e=>{if(!e.errors)return;let t=e.errors.find(e=>e.code===ef.O1.INVALID_STRATEGY_FOR_USER||e.code===ef.O1.FORM_PASSWORD_INCORRECT),o=e.errors.find(e=>"identifier_already_signed_in"===e.code),n=e.errors.find(e=>e.code===ef.O1.INVITATION_ACCOUNT_NOT_EXISTS||e.code===ef.O1.FORM_IDENTIFIER_NOT_FOUND);if(t)await ea(er);else if(o){let e=o.meta.sessionId;await a.setActive({session:e,redirectUrl:y})}else if(b&&n){let e=(0,R.s2)(er);if(p.signUp.mode===ef.ci.WAITLIST)return m(a.buildWaitlistUrl("emailAddress"===e?{initialValues:{[e]:er.value}}:{}));a.client.signUp[e]=er.value;let t=new URLSearchParams;O&&t.set("__clerk_ticket",O);let o=(0,z.wT)(B,u.signUpUrl),n=B.afterSignUpUrl||"/";return function(e){let{identifierAttribute:t,identifierValue:r,signUpMode:o,navigate:n,organizationTicket:i,afterSignUpUrl:a,clerk:s,handleError:l,redirectUrl:c,redirectUrlComplete:d,passwordEnabled:u}=e;if(o===ef.ci.WAITLIST)return n(s.buildWaitlistUrl("emailAddress"===t?{initialValues:{[t]:r}}:{}));s.client.signUp[t]=r;let p=new URLSearchParams;return(i&&p.set("__clerk_ticket",i),u||s.client.signUp.optionalFields.filter(e=>!e.startsWith("oauth_")&&!e.startsWith("web3_")&&"password"!==e&&"enterprise_sso"!==e&&"saml"!==e).length>0||"emailAddress"!==t&&"phoneNumber"!==t)?n("create?".concat(p.toString())):s.client.signUp.create({[t]:r}).then(e=>(0,eg.v)({signUp:e,verifyEmailPath:"create/verify-email-address",verifyPhonePath:"create/verify-phone-number",handleComplete:()=>s.setActive({session:e.createdSessionId,redirectUrl:a}),navigate:n,redirectUrl:c,redirectUrlComplete:d})).catch(e=>l(e))}({afterSignUpUrl:B.afterSignUpUrl||"/",clerk:a,handleError:e=>(0,S.S3)(e,[er,V],r.setError),identifierAttribute:e,identifierValue:er.value,navigate:m,organizationTicket:O,signUpMode:p.signUp.mode,redirectUrl:o,redirectUrlComplete:n,passwordEnabled:p.attributes.password.required})}else(0,S.S3)(e,[er,V],r.setError)},ec=async e=>(e.preventDefault(),ea(er,V)),ed=(0,i.useMemo)(()=>({tel:g.Form.PhoneInput,password:g.Form.PasswordInput,text:g.Form.PlainInput,email:g.Form.PlainInput})[er.type],[er.type]);if(s.isLoading)return(0,o.tZ)(g.LoadingCard,{});let{action:eu,...ep}=er.props;return(0,o.tZ)(c.Flow.Part,{part:"start",children:(0,o.BX)(g.Card.Root,{children:[(0,o.BX)(g.Card.Content,{children:[(0,o.tZ)(g.Header.Root,{showLogo:!0,children:b?(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.start.__experimental_titleCombined")}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(g.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.start.title")}),(0,o.tZ)(g.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.start.subtitle")})]})}),(0,o.tZ)(g.Card.Alert,{children:r.error}),(0,o.BX)(c.Col,{elementDescriptor:c.descriptors.main,gap:6,children:[(0,o.BX)(g.SocialButtonsReversibleContainerWithDivider,{children:[j&&(0,o.tZ)(x,{enableWeb3Providers:!0,enableOAuthProviders:!0}),D.length?(0,o.BX)(g.Form.Root,{onSubmit:ec,gap:8,children:[(0,o.BX)(c.Col,{gap:6,children:[(0,o.tZ)(g.Form.ControlRow,{elementId:er.id,children:(0,o.tZ)(ed,{actionLabel:null==W?void 0:W.action,onActionClicked:()=>{T(e=>Z[(Z.indexOf(e)+1)%Z.length]),Q(!0),M(!1)},...ep,autoFocus:q,autoComplete:P?"webauthn":void 0})}),(0,o.tZ)(eC,{field:$?V:void 0})]}),(0,o.tZ)(g.Form.SubmitButton,{hasArrow:!0})]}):null]}),p.attributes.passkey.enabled&&p.passkeySettings.show_sign_in_button&&E&&(0,o.tZ)(g.Card.Action,{elementId:"usePasskey",children:(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.start.actionLink__use_passkey"),onClick:()=>F({flow:"discoverable"})})})]})]}),(0,o.BX)(g.Card.Footer,{children:[p.signUp.mode===ef.ci.PUBLIC&&!b&&(0,o.BX)(g.Card.Action,{elementId:"signIn",children:[(0,o.tZ)(g.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signIn.start.actionText")}),(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.start.actionLink"),to:a.buildUrlWithAuth(_)})]}),p.signUp.mode===ef.ci.WAITLIST&&(0,o.BX)(g.Card.Action,{elementId:"signIn",children:[(0,o.tZ)(g.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signIn.start.actionText__join_waitlist")}),(0,o.tZ)(g.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.start.actionLink__join_waitlist"),to:a.buildUrlWithAuth(w)})]})]})]})})}));function eB(){let e=(0,n.cL)();return i.useEffect(()=>{e.redirectToSignIn()},[]),null}function ey(){var e;let t=(0,l.useSignInContext)(),r=(0,l.useSignUpContext)(),n=(0,l.useOptions)();return(0,o.tZ)(c.Flow.Root,{flow:"signIn",children:(0,o.BX)(d.Switch,{children:[(0,o.tZ)(d.Route,{path:"factor-one",children:(0,o.tZ)(en,{})}),(0,o.tZ)(d.Route,{path:"factor-two",children:(0,o.tZ)(ep,{})}),(0,o.tZ)(d.Route,{path:"reset-password",children:(0,o.tZ)(B,{})}),(0,o.tZ)(d.Route,{path:"reset-password-success",children:(0,o.tZ)(w,{})}),(0,o.tZ)(d.Route,{path:"sso-callback",children:(0,o.tZ)(eh,{signUpUrl:t.signUpUrl,signInUrl:t.signInUrl,signInForceRedirectUrl:t.afterSignInUrl,signUpForceRedirectUrl:t.afterSignUpUrl,continueSignUpUrl:t.signUpContinueUrl,transferable:t.transferable,firstFactorUrl:"../factor-one",secondFactorUrl:"../factor-two",resetPasswordUrl:"../reset-password"})}),(0,o.tZ)(d.Route,{path:"choose",children:(0,o.tZ)(F,{})}),(0,o.tZ)(d.Route,{path:"verify",children:(0,o.tZ)(s.J,{redirectUrlComplete:t.afterSignInUrl,redirectUrl:"../factor-two"})}),(null===(e=n.experimental)||void 0===e?void 0:e.combinedFlow)&&(0,o.BX)(d.Route,{path:"create",children:[(0,o.tZ)(d.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,o.tZ)(m.A,{})}),(0,o.tZ)(d.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,o.tZ)(f.c,{})}),(0,o.tZ)(d.Route,{path:"sso-callback",children:(0,o.tZ)(p.e,{signUpUrl:r.signUpUrl,signInUrl:r.signInUrl,signUpForceRedirectUrl:r.afterSignUpUrl,signInForceRedirectUrl:r.afterSignInUrl,secondFactorUrl:r.secondFactorUrl,continueSignUpUrl:"../continue",verifyEmailAddressUrl:"../verify-email-address",verifyPhoneNumberUrl:"../verify-phone-number"})}),(0,o.tZ)(d.Route,{path:"verify",children:(0,o.tZ)(s.$,{redirectUrlComplete:r.afterSignUpUrl,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",continuePath:"../continue"})}),(0,o.BX)(d.Route,{path:"continue",children:[(0,o.tZ)(d.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,o.tZ)(m.A,{})}),(0,o.tZ)(d.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,o.tZ)(f.c,{})}),(0,o.tZ)(d.Route,{index:!0,children:(0,o.tZ)(u.x,{})})]}),(0,o.tZ)(d.Route,{index:!0,children:(0,o.tZ)(h.J,{})})]}),(0,o.tZ)(d.Route,{index:!0,children:(0,o.tZ)(eS,{})}),(0,o.tZ)(d.Route,{children:(0,o.tZ)(eB,{})})]})})}ey.displayName="SignIn";let e_=(0,l.withCoreSessionSwitchGuard)(function(){var e;let t=(0,l.useSignInContext)(),r={componentName:"SignUp",...null===(e=t.__experimental)||void 0===e?void 0:e.combinedProps,emailLinkRedirectUrl:t.emailLinkRedirectUrl,ssoCallbackUrl:t.ssoCallbackUrl,...(0,a.L)({routing:null==t?void 0:t.routing,path:null==t?void 0:t.path})};return(0,o.tZ)(l.SignUpContext.Provider,{value:r,children:(0,o.tZ)(ey,{})})}),ew=e=>{let t={signUpUrl:"/".concat(d.VIRTUAL_ROUTER_BASE_PATH,"/sign-up"),waitlistUrl:"/".concat(d.VIRTUAL_ROUTER_BASE_PATH,"/waitlist"),...e};return(0,o.tZ)(d.Route,{path:"sign-in",children:(0,o.tZ)(l.SignInContext.Provider,{value:{componentName:"SignIn",...t,routing:"virtual",mode:"modal"},children:(0,o.tZ)("div",{children:(0,o.tZ)(e_,{...t,routing:"virtual"})})})})}},5518:function(e,t,r){r.d(t,{Vh:function(){return h},bx:function(){return u},s2:function(){return f},t3:function(){return l},xT:function(){return d}}),r(5670);var o=r(5263),n=r(7772),i=r(881);let a=e=>t=>"safeIdentifier"in t&&t.safeIdentifier===e;function s(e){if((0,o.iW)()){let t=e.find(e=>{let{strategy:t}=e;return"passkey"===t});if(t)return t}return null}function l(e,t,r){return e&&0!==e.length?r===n.kJ.Password?function(e,t){let r=s(e);if(r)return r;let o=e.sort(i.sZ)[0];return"password"===o.strategy?o:e.find(a(t))||o||null}(e,t):function(e,t){let r=s(e);if(r)return r;let o=e.sort(i.b8),n=o.find(a(t));if(n)return n;let l=o[0];return"email_link"===l.strategy?l:e.find(a(t))||l||null}(e,t):null}let c=["passkey","email_code","password","phone_code","email_link"];function d(e){return!!e&&c.includes(e.strategy)}function u(e){if(!e||0===e.length)return null;let t=e.find(e=>"totp"===e.strategy);if(t)return t;let r=e.find(e=>"phone_code"===e.strategy);return r||e[0]}let p=["reset_password_phone_code","reset_password_email_code"],h=e=>!!e&&p.includes(e),m=e=>/^\S+@\S+\.\S+$/.test(e);function f(e){return"tel"===e.type?"phoneNumber":m(e.value)?"emailAddress":"username"}},9327:function(e,t,r){r.d(t,{fB:function(){return d},gW:function(){return p},uj:function(){return u}});var o=r(7126),n=r(4676),i=r(1673),a=r(7571),s=r(3064),l=r(9885),c=r(8655);let d=e=>{let{navigate:t}=(0,n.useRouter)(),{handleManageAccountClicked:r,handleSignOutSessionClicked:c,handleUserProfileActionClicked:d,session:u}=e,{menutItems:p}=(0,a.useUserButtonContext)(),h=e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100,padding:"".concat(e.space.$4," ").concat(e.space.$5)}),m=async o=>{var n;return(null==o?void 0:o.path)?(await t(o.path),null==e?void 0:e.completedCallback()):o.id===i.Zb.MANAGE_ACCOUNT?await r():(null==o?void 0:o.open)?d(o.open):(null===(n=o.onClick)||void 0===n||n.call(o),null==e?void 0:e.completedCallback())};return(0,o.tZ)(l.Actions,{role:"menu",elementDescriptor:s.descriptors.userButtonPopoverActions,elementId:s.descriptors.userButtonPopoverActions.setId("singleSession"),sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),children:null==p?void 0:p.map(e=>{let t;return t=Object.values(i.Zb).includes(e.id)?{elementDescriptor:s.descriptors.userButtonPopoverActionButton,elementId:s.descriptors.userButtonPopoverActionButton.setId(e.id),iconBoxElementDescriptor:s.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverActionButtonIconBox.setId(e.id),iconElementDescriptor:s.descriptors.userButtonPopoverActionButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionButtonIcon.setId(e.id)}:{elementDescriptor:s.descriptors.userButtonPopoverCustomItemButton,elementId:s.descriptors.userButtonPopoverCustomItemButton.setId(e.id),iconBoxElementDescriptor:s.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(e.id),iconElementDescriptor:s.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionItemButtonIcon.setId(e.id)},(0,o.tZ)(l.Action,{...t,icon:e.icon,label:e.name,onClick:e.id===i.Zb.SIGN_OUT?c(u):()=>m(e),sx:h,iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4})},e.id)})})},u=e=>{let{navigate:t}=(0,n.useRouter)(),{handleManageAccountClicked:r,handleSignOutSessionClicked:d,handleSessionClicked:u,handleAddAccountClicked:p,handleUserProfileActionClicked:h,session:m,otherSessions:f}=e,{menutItems:I}=(0,a.useUserButtonContext)(),g=async o=>{var n;return(null==o?void 0:o.path)?(await t(o.path),null==e?void 0:e.completedCallback()):o.id===i.Zb.MANAGE_ACCOUNT?await r():(null==o?void 0:o.open)?h(o.open):(null===(n=o.onClick)||void 0===n||n.call(o),null==e?void 0:e.completedCallback())},v=I.every(e=>Object.values(i.Zb).includes(e.id));return(0,o.BX)(o.HY,{children:[v?(0,o.tZ)(l.SmallActions,{role:"menu",elementDescriptor:s.descriptors.userButtonPopoverActions,elementId:s.descriptors.userButtonPopoverActions.setId("multiSession"),children:(0,o.BX)(s.Flex,{justify:"between",sx:e=>({marginLeft:e.space.$12,padding:"0 ".concat(e.space.$5," ").concat(e.space.$4),gap:e.space.$2}),children:[(0,o.tZ)(l.SmallAction,{elementDescriptor:s.descriptors.userButtonPopoverActionButton,elementId:s.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:s.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:s.descriptors.userButtonPopoverActionButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),icon:c.tc,label:(0,s.localizationKeys)("userButton.action__manageAccount"),onClick:r}),(0,o.tZ)(l.SmallAction,{elementDescriptor:s.descriptors.userButtonPopoverActionButton,elementId:s.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:s.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:s.descriptors.userButtonPopoverActionButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),icon:c.lv,label:(0,s.localizationKeys)("userButton.action__signOut"),onClick:d(m)})]})}):(0,o.tZ)(l.SmallActions,{role:"menu",elementDescriptor:s.descriptors.userButtonPopoverActions,elementId:s.descriptors.userButtonPopoverActions.setId("multiSession"),sx:e=>({gap:e.space.$1,paddingBottom:e.space.$2}),children:null==I?void 0:I.map(e=>{let t;return t=Object.values(i.Zb).includes(e.id)?{elementDescriptor:s.descriptors.userButtonPopoverActionButton,elementId:s.descriptors.userButtonPopoverActionButton.setId(e.id),iconBoxElementDescriptor:s.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverActionButtonIconBox.setId(e.id),iconElementDescriptor:s.descriptors.userButtonPopoverActionButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionButtonIcon.setId(e.id)}:{elementDescriptor:s.descriptors.userButtonPopoverCustomItemButton,elementId:s.descriptors.userButtonPopoverCustomItemButton.setId(e.id),iconBoxElementDescriptor:s.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(e.id),iconElementDescriptor:s.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionItemButtonIcon.setId(e.id)},(0,o.tZ)(l.Action,{...t,icon:e.icon,label:e.name,onClick:e.id===i.Zb.SIGN_OUT?d(m):()=>g(e),sx:e=>({border:0,padding:"".concat(e.space.$2," ").concat(e.space.$5),gap:e.space.$3x5}),iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4}),iconBoxSx:e=>({minHeight:e.sizes.$4,minWidth:e.sizes.$4,alignItems:"center"})},e.id)})}),(0,o.BX)(l.Actions,{role:"menu",sx:e=>({borderTopStyle:e.borderStyles.$solid,borderTopWidth:e.borderWidths.$normal,borderTopColor:e.colors.$neutralAlpha100}),children:[f.map(e=>(0,o.tZ)(l.PreviewButton,{icon:c.nR,onClick:u(e),role:"menuitem",children:(0,o.tZ)(l.UserPreview,{user:e.user})},e.id)),(0,o.tZ)(l.Action,{elementDescriptor:s.descriptors.userButtonPopoverActionButton,elementId:s.descriptors.userButtonPopoverActionButton.setId("addAccount"),iconBoxElementDescriptor:s.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverActionButtonIconBox.setId("addAccount"),iconElementDescriptor:s.descriptors.userButtonPopoverActionButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionButtonIcon.setId("addAccount"),icon:c.mm,label:(0,s.localizationKeys)("userButton.action__addAccount"),onClick:p,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})]})},p=e=>{let{handleSignOutAllClicked:t,elementDescriptor:r,elementId:n,iconBoxElementDescriptor:i,iconBoxElementId:a,iconElementDescriptor:d,iconElementId:u,label:p,sx:h,actionSx:m}=e;return(0,o.tZ)(l.Actions,{role:"menu",sx:[e=>({padding:e.space.$2}),h],children:(0,o.tZ)(l.Action,{elementDescriptor:r||s.descriptors.userButtonPopoverActionButton,elementId:n||s.descriptors.userButtonPopoverActionButton.setId("signOutAll"),iconBoxElementDescriptor:i||s.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:a||s.descriptors.userButtonPopoverActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:d||s.descriptors.userButtonPopoverActionButtonIcon,iconElementId:u||s.descriptors.userButtonPopoverActionButtonIcon.setId("signOutAll"),icon:c.lv,label:p||(0,s.localizationKeys)("userButton.action__signOutAll"),onClick:t,variant:"ghost",colorScheme:"neutral",sx:[e=>({backgroundColor:e.colors.$transparent,padding:"".concat(e.space.$2," ").concat(e.space.$3),borderBottomWidth:0,borderRadius:e.radii.$lg}),m],spinnerSize:"md"})})}},5241:function(e,t,r){r.d(t,{Z:function(){return c}});var o=r(2631),n=r(5809),i=r(9885),a=r(4264),s=r(4676),l=r(2539);let c=e=>{let{setActive:t,signOut:r,openUserProfile:c}=(0,o.cL)(),d=(0,i.useCardState)(),{activeSessions:u,otherSessions:p}=(0,a.j)({user:e.user}),{navigate:h}=(0,s.useRouter)();return{handleSignOutSessionClicked:t=>()=>0===p.length?r(e.navigateAfterSignOut):r(e.navigateAfterMultiSessionSingleSignOut,{sessionId:t.id}).finally(()=>d.setIdle()),handleManageAccountClicked:()=>{var t;return"navigation"===e.userProfileMode?h(e.userProfileUrl||"").finally(()=>{(async()=>{var t;await (0,l._v)(300),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)})()}):(c(e.userProfileProps),null===(t=e.actionCompleteCallback)||void 0===t?void 0:t.call(e))},handleUserProfileActionClicked:t=>{var r;return"navigation"===e.userProfileMode?h(e.userProfileUrl||"").finally(()=>{(async()=>{var t;await (0,l._v)(300),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)})()}):(c({...e.userProfileProps,...t&&{__experimental_startPath:t}}),null===(r=e.actionCompleteCallback)||void 0===r?void 0:r.call(e))},handleSignOutAllClicked:()=>r(e.navigateAfterSignOut),handleSessionClicked:r=>async()=>(d.setLoading(),t({session:r,redirectUrl:e.afterSwitchSessionUrl}).finally(()=>{var t;d.setIdle(),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)})),handleAddAccountClicked:()=>((0,n.T7)(e.signInUrl||window.location.href),(0,l._v)(2e3)),otherSessions:p,activeSessions:u}}}}]);